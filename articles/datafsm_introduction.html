<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to datafsm • datafsm</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to datafsm">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">datafsm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/datafsm_introduction.html">Introduction to datafsm</a>
    </li>
    <li>
      <a href="../articles/FRD_vignette.html">Example with real data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jonathan-g/datafsm/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to datafsm</h1>
                        <h4 data-toc-skip class="author">John J. Nay and
Jonathan M. Gilligan</h4>
            
            <h4 data-toc-skip class="date">Sept. 5, 2015</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/jonathan-g/datafsm/blob/main/vignettes/datafsm_introduction.Rmd" class="external-link"><code>vignettes/datafsm_introduction.Rmd</code></a></small>
      <div class="hidden name"><code>datafsm_introduction.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="abstract">Abstract<a class="anchor" aria-label="anchor" href="#abstract"></a>
</h2>
<p>The <strong>datafsm</strong> package implements a method for
automatically generating models of dynamic processes that both have
strong predictive power and are interpretable in human terms. We use an
efficient model representation and a genetic algorithm-based estimation
process. This paper offers a brief overview of the software and
demonstrates how to use it.</p>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This package implements our method for automatically generating
models of dynamic decision-making that both have strong predictive power
and are interpretable in human terms. We use an efficient model
representation and a genetic algorithm-based estimation process to
generate simple deterministic approximations that explain most of the
structure of complex stochastic processes. The genetic algorithm is
implemented with the <strong>GA</strong> package (<a href="https://www.jstatsoft.org/v53/i04/" class="external-link">Scrucca 2013</a>). Our method,
implemented in C++ and R, scales well to large data sets. We have
applied the package to empirical data, and demonstrated the method’s
ability to recover known data-generating processes by simulating data
with agent-based models and correctly deriving the underlying decision
models for multiple agent models and degrees of stochasticity.</p>
<p>A user of our package can estimate models by providing their data in
a common “panel data” format. The package is designed to estimate time
series classification models that use a small number of binary predictor
variables and move back and forth between the values of the outcome
variable over time. Larger sets of predictor variables can be reduced to
smaller sets with cross-validation. Although the predictor variables
must be binary, a quantitative variable can be converted into binary by
division of the observed values into high/low classes. Future releases
of the package may include additional estimation methods to complement
genetic algorithm optimization.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load and attach datafsm into your R session, making its functions available:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jonathan-g.github.io/datafsm/">datafsm</a></span><span class="op">)</span></span></code></pre></div>
<p>Please cite the package if you use it with the text generated by:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"datafsm"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## To cite package 'datafsm' in publications use:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Nay JJ, Gilligan JM (2015). "Data-driven dynamic decision models." In</span></span>
<span><span class="co">##   Yilmaz L, Chan WKV, Moon I, Roeder TMK, Macal C, Rosetti M (eds.),</span></span>
<span><span class="co">##   _Proceedings of the 2015 Winter Simulation Conference_, 2752-2763.</span></span>
<span><span class="co">##   doi:10.1109/WSC.2015.7408381</span></span>
<span><span class="co">##   &lt;https://doi.org/10.1109/WSC.2015.7408381&gt;.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   @InProceedings{,</span></span>
<span><span class="co">##     title = {Data-driven dynamic decision models},</span></span>
<span><span class="co">##     author = {John J. Nay and Jonathan M. Gilligan},</span></span>
<span><span class="co">##     booktitle = {Proceedings of the 2015 Winter Simulation Conference},</span></span>
<span><span class="co">##     year = {2015},</span></span>
<span><span class="co">##     editor = {L. Yilmaz and W. K. V. Chan and I. Moon and T. M. K. Roeder and C. Macal and M. Rosetti},</span></span>
<span><span class="co">##     pages = {2752--2763},</span></span>
<span><span class="co">##     doi = {10.1109/WSC.2015.7408381},</span></span>
<span><span class="co">##   }</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="fake-data-example">Fake Data Example<a class="anchor" aria-label="anchor" href="#fake-data-example"></a>
</h2>
<p>To quickly show it works, we can create fake data. Here, we generate
1000 repetitions of a 10-round game in which each player starts by
making a random move, and in subsequent rounds, each player follows a
“noisy tit-for-tat” strategy that’s equivalent to tit-for-tat, except
that with a 5% probability the player will make a random move.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rounds</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">reps</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span><span class="va">noise_level</span> <span class="op">&lt;-</span> <span class="fl">0.05</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">seed1</span> <span class="op">&lt;-</span> <span class="fl">1372456261</span></span>
<span><span class="va">seed2</span> <span class="op">&lt;-</span>  <span class="fl">597693057</span></span>
<span><span class="va">seed3</span> <span class="op">&lt;-</span>  <span class="fl">805078823</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">seed1</span><span class="op">)</span></span>
<span><span class="va">cdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                    period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">rounds</span><span class="op">)</span>, <span class="va">reps</span><span class="op">)</span>,</span>
<span>                    my.decision1 <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>                    other.decision1 <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#</span></span>
<span><span class="co"># Prisoner's dilemma</span></span>
<span><span class="co">#</span></span>
<span><span class="va">pd_outcome</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">player_1</span>, <span class="va">player_2</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="co"># 1 = C</span></span>
<span>  <span class="co"># 2 = D</span></span>
<span>  <span class="co">#</span></span>
<span>  <span class="va">player_1</span>  <span class="op">+</span> <span class="fl">1</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">tit_for_tat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">last_round_self</span>, <span class="va">last_round_opponent</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">last_round_opponent</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">noisy_tit_for_tat</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">last_round_self</span>, <span class="va">last_round_opponent</span>, <span class="va">noise_level</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="va">noise_level</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="va">last_round_opponent</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">cdata</span><span class="op">$</span><span class="va">period</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">cdata</span><span class="op">$</span><span class="va">period</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">my.decision</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>,<span class="fl">1</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">noise_level</span>, <span class="va">noise_level</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">other.decision</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>,<span class="fl">1</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">noise_level</span>, <span class="va">noise_level</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">cdata</span><span class="op">[</span><span class="va">i</span>, <span class="st">"outcome"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">pd_outcome</span><span class="op">(</span><span class="va">my.decision</span>, <span class="va">other.decision</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span><span class="op">{</span></span>
<span>    <span class="va">my.last</span> <span class="op">&lt;-</span> <span class="va">my.decision</span></span>
<span>    <span class="va">other.last</span> <span class="op">&lt;-</span> <span class="va">other.decision</span></span>
<span>    <span class="va">my.decision</span> <span class="op">&lt;-</span> <span class="fu">noisy_tit_for_tat</span><span class="op">(</span><span class="va">my.last</span>, <span class="va">other.last</span>, <span class="va">noise_level</span><span class="op">)</span></span>
<span>    <span class="va">other.decision</span> <span class="op">&lt;-</span> <span class="fu">noisy_tit_for_tat</span><span class="op">(</span><span class="va">other.last</span>, <span class="va">my.last</span>, <span class="va">noise_level</span><span class="op">)</span></span>
<span>    <span class="va">cdata</span><span class="op">[</span><span class="va">i</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outcome"</span>, <span class="st">"my.decision1"</span>, <span class="st">"other.decision1"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu">pd_outcome</span><span class="op">(</span><span class="va">my.decision</span>, <span class="va">other.decision</span><span class="op">)</span>, <span class="va">my.last</span>, <span class="va">other.last</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The only required argument of the main function of the package,
<code>evolve_model</code>, is a <code>data.frame</code> object, which
must have 3-5 columns. The first two columns must be named
<code>period</code> and <code>outcome</code> (<code>period</code> is the
time period that the <code>outcome</code> action was taken). The
remaining one to three columns are predictors, and may have arbitrary
names. Each row of the <code>data.frame</code> is an observational unit,
an action taken at a particular time and any relevant variables for that
time. All of the (3-5 columns) should be named. The period and outcome
columns should be integer vectors — e.g. <code>c(1,2,1)</code> — and the
columns with the predictor variable data should be logical vectors —
e.g.  <code>c(TRUE, FALSE, FALSE)</code> — or vectors that can be
coerced to logical with <code><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical()</a></code>.</p>
<p>Here are the first eleven rows of this fake data:</p>
<table class="table">
<thead><tr class="header">
<th align="right">outcome</th>
<th align="right">period</th>
<th align="right">my.decision1</th>
<th align="right">other.decision1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">7</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">8</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">9</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>We can estimate a model with that data. <code>evolve_model</code>
uses a genetic algorithm to estimate a finite-state machine (FSM) model,
primarily for understanding and predicting decision-making. This is the
main function of the <code>datafsm</code> package. It relies on the
<code>GA</code> package for genetic algorithm optimization. We chose to
use a GA because GAs perform well in rugged search spaces to solve
integer optimization problems, are a natural complement to our binary
representation of FSMs, and are easily parallelized.</p>
<p><code>evolve_model</code> takes data on predictors and data on the
outcome and automatically creates a fitness function that takes training
data, an action vector that <code>evolve_model</code> generates, and a
state matrix <code>evolve_model</code> generates as input and returns
numeric vector whose length is the number of rows in the training data.
<code>evolve_model</code> then computes a fitness score for that
potential solution FSM by comparing it to the provided
<code>outcome</code> in the real training data. This is repeated for
every FSM in the population and then the probability of selection for
the next generation is proportional to the fitness scores. If the
argument <code>cv</code> is set to <code>TRUE</code> the function will
call itself recursively while varying the number of states inside a
cross-validation loop in order to estimate the optimal number of states,
then it will set the number of states to that optimal number and
estimate the model on the full training set.</p>
<p>If the argument <code>parallel</code> is set to <code>TRUE</code>,
then these evaluations are distributed across the available processors
of the computer using the <code>doParallel</code> functions; otherwise,
the evaluations of fitness are conducted sequentially. Because this
fitness function that <code>evolve_model</code> creates must loop
through all the training data every time it is evaluated and we need to
evaluate many possible solution FSMs, the fitness function is
implemented in C++ to improve its performance.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="va">seed2</span><span class="op">)</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evolve_model.html">evolve_model</a></span><span class="op">(</span><span class="va">cdata</span>, seed <span class="op">=</span> <span class="va">seed3</span><span class="op">)</span></span></code></pre></div>
<p><code>evolve_model</code> evolves the models on training data and
then, if a test set is provided, uses the best solution to make
predictions on test data. Finally, the function returns the GA object
and the decoded version of the best string in the population. Formally,
the function return an <code>S4</code> object with slots for:</p>
<ul>
<li>
<code>call</code> Language from the call of the function.</li>
<li>
<code>actions</code> Numeric vector with the number of actions.</li>
<li>
<code>states</code> Numeric vector with the number of states.</li>
<li>
<code>GA</code> S4 object created by <code><a href="https://github.com/luca-scr/GA/reference/ga.html" class="external-link">ga()</a></code> from the
<code>GA</code> package.</li>
<li>
<code>state_mat</code> Numeric matrix with rows as states and
columns as predictors.</li>
<li>
<code>action_vec</code> Numeric vector indicating what action to
take for each state.</li>
<li>
<code>predictive</code> Numeric vector of length one with test data
accuracy if test data was supplied; otherwise, a character vector with a
message that the user should provide test data for better estimate of
generalizable performance.</li>
<li>
<code>varImp</code> Numeric vector with length equal to the number
of columns in the state matrix, containing relative importance scores
for each predictor.</li>
<li>
<code>timing</code> Numeric vector length one containing the total
elapsed time it took <code>evolve_model</code> to execute.</li>
<li>
<code>diagnostics</code> Character vector length one, designed to be
printed with <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">base::cat()</a></code>.</li>
</ul>
<p>Use the summary and plot methods on the output of the
<code><a href="../reference/evolve_model.html">evolve_model()</a></code> function:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Length  Class   Mode </span></span>
<span><span class="co">##      1 ga_fsm     S4</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span>, action_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="../reference/action_vec.html">action_vec</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">==</span><span class="fl">1</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>, </span>
<span>     transition_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cc'</span>,<span class="st">'dc'</span>,<span class="st">'cd'</span>,<span class="st">'dd'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="datafsm_introduction_files/figure-html/plot.fsm-1.png" class="r-plt" alt="Result of `plot()` method call on `ga_fsm` object." width="480"><p class="caption">
Result of <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method call on <code>ga_fsm</code> object.
</p>
</div>
<p>The diagram shows that <code>evolve_model</code> recovered a
tit-for-tat model in which the player in question (“me”) mimics the last
action of the opponent.</p>
<p>Use the <code>estimation_details</code> method on the output of the
<code><a href="../reference/evolve_model.html">evolve_model()</a></code> function:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://luca-scr.github.io/GA/" class="external-link">GA</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/estimation_details.html">estimation_details</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="datafsm_introduction_files/figure-html/plot.evolution-1.png" class="r-plt" alt="Result of `plot()` method call on ga object, which is obtained by calling `estimation_details()` on `ga_fsm` object." width="768"><p class="caption">
Result of <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method call on ga object, which is
obtained by calling <code><a href="../reference/estimation_details.html">estimation_details()</a></code> on
<code>ga_fsm</code> object.
</p>
</div>
</div>
<div class="section level2">
<h2 id="documentation-for-evolve_model">Documentation for <code>evolve_model</code><a class="anchor" aria-label="anchor" href="#documentation-for-evolve_model"></a>
</h2>
<p>Check out the documentation for the main function of the package to
learn about all the options:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">evolve_model</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>This work is supported by U.S. National Science Foundation grants
EAR-1416964 and EAR-1204685.</p>
</div>
<div class="section level2">
<h2 id="session-info">Session Info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.5.2 (2025-10-31)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">## Running under: Ubuntu 24.04.3 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] GA_3.2.4         iterators_1.0.14 foreach_1.5.2    datafsm_0.2.5   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] shape_1.4.6.1        gtable_0.3.6         xfun_0.54           </span></span>
<span><span class="co">##  [4] bslib_0.9.0          ggplot2_4.0.1        recipes_1.3.1       </span></span>
<span><span class="co">##  [7] lattice_0.22-7       vctrs_0.6.5          tools_4.5.2         </span></span>
<span><span class="co">## [10] generics_0.1.4       stats4_4.5.2         parallel_4.5.2      </span></span>
<span><span class="co">## [13] tibble_3.3.0         ModelMetrics_1.2.2.2 pkgconfig_2.0.3     </span></span>
<span><span class="co">## [16] Matrix_1.7-4         data.table_1.17.8    RColorBrewer_1.1-3  </span></span>
<span><span class="co">## [19] S7_0.2.1             desc_1.4.3           lifecycle_1.0.4     </span></span>
<span><span class="co">## [22] stringr_1.6.0        compiler_4.5.2       farver_2.1.2        </span></span>
<span><span class="co">## [25] textshaping_1.0.4    diagram_1.6.5        codetools_0.2-20    </span></span>
<span><span class="co">## [28] htmltools_0.5.8.1    class_7.3-23         sass_0.4.10         </span></span>
<span><span class="co">## [31] yaml_2.3.10          prodlim_2025.04.28   pillar_1.11.1       </span></span>
<span><span class="co">## [34] pkgdown_2.2.0        crayon_1.5.3         jquerylib_0.1.4     </span></span>
<span><span class="co">## [37] MASS_7.3-65          cachem_1.1.0         gower_1.0.2         </span></span>
<span><span class="co">## [40] rpart_4.1.24         nlme_3.1-168         parallelly_1.45.1   </span></span>
<span><span class="co">## [43] lava_1.8.2           tidyselect_1.2.1     digest_0.6.38       </span></span>
<span><span class="co">## [46] stringi_1.8.7        future_1.68.0        reshape2_1.4.5      </span></span>
<span><span class="co">## [49] dplyr_1.1.4          purrr_1.2.0          listenv_0.10.0      </span></span>
<span><span class="co">## [52] splines_4.5.2        fastmap_1.2.0        grid_4.5.2          </span></span>
<span><span class="co">## [55] cli_3.6.5            magrittr_2.0.4       survival_3.8-3      </span></span>
<span><span class="co">## [58] future.apply_1.20.0  withr_3.0.2          scales_1.4.0        </span></span>
<span><span class="co">## [61] lubridate_1.9.4      timechange_0.3.0     rmarkdown_2.30      </span></span>
<span><span class="co">## [64] globals_0.18.0       nnet_7.3-20          timeDate_4051.111   </span></span>
<span><span class="co">## [67] ragg_1.5.0           evaluate_1.0.5       knitr_1.50          </span></span>
<span><span class="co">## [70] hardhat_1.4.2        caret_7.0-1          doParallel_1.0.17   </span></span>
<span><span class="co">## [73] rlang_1.1.6          Rcpp_1.1.0           glue_1.8.0          </span></span>
<span><span class="co">## [76] pROC_1.19.0.1        ipred_0.9-15         jsonlite_2.0.0      </span></span>
<span><span class="co">## [79] R6_2.6.1             plyr_1.8.9           systemfonts_1.3.1   </span></span>
<span><span class="co">## [82] fs_1.6.6</span></span></code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John J. Nay, Jonathan M. Gilligan.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
